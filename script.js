document.addEventListener('DOMContentLoaded',()=>{const _=20,aa=6,ba=6,ca=["Pashupatastra","Vayu Astra","Agni Astra","Vajra Astra","Brahmastra"],da=[0,1,4,5,12,17],ea=[{team:1,secretKey:"SILENCE",asuraForm:"The sky turned crimson as the Asura descended — his roar splitting mountains, his gaze setting oceans ablaze. His presence was heavier than gravity itself — a darkness that crushed even light beneath its will. For a thousand years, he had slept beneath the cosmic depths, waiting for mankind’s arrogance to summon him again.\n\nThe five warriors stood upon the edge of existence, their hearts unwavering, their Astras gleaming with divine power. Before them shimmered five layers of protection — the seals of the Asura — each a test beyond imagination.\n\nThe first layer was silence. The second layer came as furious wind. Then came fire — molten, living, alive with divine vengeance. The fourth barrier erupted as thunder and lightning. And finally, a veil of creation itself pulsed before them.\n\nAsura’s laughter tore through the silence: “You think you’ve broken my shields? You’ve merely awakened me!”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Pashupatastra","Vayu Astra","Agni Astra","Vajra Astra","Brahmastra"]},{team:2,secretKey:"COSMOS",asuraForm:"The air was thick with ash as the Asura’s shadow fell upon the peaks of Kailasha. The five warriors stood before an altar of forgotten gods, their hearts burning with resolve.\n\nThe first seal was no wind nor flame, but a blaze that refused to be tamed — fire that spoke of chaos and cleansing. When the flames subsided, the silence that followed carried whispers of the sky. Far beyond, a light shimmered within a dark sphere — creation bound in destruction. But the next barrier was merciless. Bolts of thunder tore across the sky. And then came the stillness — the first veil reborn.\n\nFrom the depths of the storm, the Asura’s laughter echoed — “Fools! You wield what was forged in my own rage. Every spark you command was once born of my fury.”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Agni Astra","Vayu Astra","Brahmastra","Vajra Astra","Pashupatastra"]},{team:3,secretKey:"DESTINY",asuraForm:"The storm howled before the first strike landed. Not of flame or thunder, but wind so fierce it tore apart thought itself. As the wind calmed, a roar split the heavens — lightning, alive and vengeful, danced across the battlefield. When the light faded, silence consumed the earth. But beneath the silence lay creation itself — the source of life and unmaking. And when the flames finally returned, they burned differently — not to consume, but to purify.\n\nAmid the thunder, the Asura’s voice rolled like doom — “You think yourselves chosen? I have broken gods before you were born. The sky itself bends to my will.”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Vayu Astra","Brahmastra","Pashupatastra","Agni Astra","Vajra Astra"]},{team:4,secretKey:"ETERNITY",asuraForm:"Flames raged across the horizon as the Asura’s laughter echoed through eternity. The warriors stepped forward, facing the first of the five seals — a fire that devoured sound and shape alike. From the ashes, thunder descended — a tempest so loud that even courage trembled. When the last bolt faded, a faint wind stirred. But ahead, all fell silent. Beyond that silence shimmered the final test — a pulse that felt alive, eternal. The very essence of creation awaited them.\n\nThe Asura sneered amid the storm — “Even the lightning bows to me, mortals. Do you think your borrowed sparks can pierce eternity?”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Agni Astra","Vajra Astra","Vayu Astra","Pashupatastra","Brahmastra"]},{team:5,secretKey:"BALANCE",asuraForm:"The sky tore apart with thunder before the warriors could take their first step. Bolts of divine wrath fell like rain, each flash a question from the heavens — “Are you worthy?” The wind followed, fierce and wild, testing not their strength but their unity. Then came the blaze — not of anger, but revelation. Beyond it, a glow pulsed gently — the song of creation, ancient and divine. Finally, silence reigned.\n\nFrom beyond the tempest, the Asura’s mocking voice boomed — “Your defiance amuses me. You fight with my own weapons and call yourselves saviors?”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Vajra Astra","Vayu Astra","Agni Astra","Brahmastra","Pashupatastra"]},{team:6,secretKey:"CHAOS",asuraForm:"The battlefield rippled with divine energy as the warriors stepped into the layer. A golden sphere surrounded them — its surface pulsing like the heartbeat of creation itself. From the fragments rose fire, wild and unchained. The sky twisted, winds howling in anger. A thunderbolt followed — fierce, relentless, shattering the mountains. The veil of silence awaited them next — so thick even thoughts felt frozen.\n\nAsura’s voice thundered: “You play with my elements as if they obey you… but every breath you take belongs to me!”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Brahmastra","Agni Astra","Vayu Astra","Vajra Astra","Pashupatastra"]},{team:7,secretKey:"COURAGE",asuraForm:"The barrier shimmered with the sound of thunder — arcs of light dancing across the horizon. But where light fades, fire rises. The ground split, and molten rivers coiled like serpents of rage. Then — silence. The world halted. But the final veil was not silence — it was birth itself. Creation trembled as energy coalesced into divine power. Winds followed, fierce and boundless, roaring through the remains of the storm.\n\nAsura laughed, voice echoing through fire and thunder: “Your courage amuses me. Shall I show you what despair truly sounds like?”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Vajra Astra","Agni Astra","Pashupatastra","Brahmastra","Vayu Astra"]},{team:8,secretKey:"STORM",asuraForm:"A wall of storm clouds surged forward — layer’s defense, alive with divine breath. Beyond the storm, the barrier of creation glowed like a newborn star. The ground ignited beneath them — flames swirling upward, alive and screaming. Then came silence — suffocating, eternal. And from that silence — lightning. Unpredictable, savage, divine.\n\nAsura’s mockery roared: “You bend my storms, wield my light, command my fire — but remember, mortals, all of it was born from me!”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Vayu Astra","Brahmastra","Agni Astra","Pashupatastra","Vajra Astra"]},{team:9,secretKey:"CREATION",asuraForm:"The air shimmered, thick with energy as the first layer emerged — the barrier of existence itself. Then lightning tore the sky — arcs of rage cutting through creation’s remains. The wind rose next, carrying whispers of forgotten gods and ancient vengeance. Flames burst across the horizon — red, wild, endless. At last, silence descended — heavy and absolute.\n\nAsura’s voice hissed through the ashes: “You think creation answers to you? I am the beginning, I am the end!”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Brahmastra","Vajra Astra","Vayu Astra","Agni Astra","Pashupatastra"]},{team:10,secretKey:"FURY",asuraForm:"The flames came first — roaring, unending, like the anger of gods forgotten by time. When the inferno bowed, silence took its place. From above, thunder rolled — light exploding, rage incarnate. A radiant sphere formed — creation itself, infinite and unyielding. Winds surged — last of the barriers — cold, furious, divine.\n\nAsura’s laughter echoed: “Pathetic illusions of power! You mimic gods — but I was born before gods were dreamed of.”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Agni Astra","Pashupatastra","Vajra Astra","Brahmastra","Vayu Astra"]},{team:11,secretKey:"VOID",asuraForm:"It began in silence — an endless void where even existence forgot its name. From that stillness, a sphere of creation pulsed, glowing with divine order. Then fire erupted — vast, sentient, furious. The storm rose next — a hurricane of divine breath. Thunder followed — merciless, striking with celestial rage.\n\nAsura sneered: “You silence my void, twist my flame, and calm my winds… Tell me, who gave you such arrogance? Brats!”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.\nWhat fate awaits the warriors now? Will they survive Asura's ultimate rage, or is this just the beginning of an even greater battle?",correctSequence:["Pashupatastra","Brahmastra","Agni Astra","Vayu Astra","Vajra Astra"]},{team:12,secretKey:"WRATH",asuraForm:"The shield emerged — lightning itself, alive and furious. Bolts fell like divine punishment, yet the warriors danced through the storm, matching its heartbeat until the thunder faded.\n\nThen came silence — deeper than time, darker than death. They didn’t fear it. They let it swallow them, and within the silence, they found light.\n\nFrom that light, creation burst forth — radiant, divine, infinite. The sphere expanded, bending reality, but their unity shaped it into balance.\n\nWinds tore across the field, screaming with divine anger. They faced it head-on, letting its force guide their rhythm, until the storm collapsed inward.\n\nFinally — flame. Pure, unbound, the symbol of rebirth. They embraced it, and the blaze turned into brilliance.\n\nAsura roared, laughter shaking the skies: “You’ve unmade my storms, silenced my thunder… but have you seen what I become when darkness itself kneels before me?”\n\nBut suddenly, the heavens darkened. The Almighty Asura unleashed his full wrath, eyes blazing like molten stars, and shadows fell across the world. Everything went black.`,correctSequence:["Vajra Astra","Pashupatastra","Brahmastra","Vayu Astra","Agni Astra"]}];const fa=document.querySelectorAll('.screen'),ga=document.getElementById('start-mission-button'),ha=document.getElementById('start-round-1-button'),ia=document.getElementById('proceed-to-round-3-button'),ja=document.getElementById('submit-sequence-button'),ka=document.getElementById('proceed-to-puzzle-button'),la=document.getElementById('back-to-story-button'),ma=document.getElementById('countdown'),na=document.getElementById('jigsaw-pieces'),oa=document.getElementById('jigsaw-board'),pa=document.getElementById('jigsaw-status'),qa=document.getElementById('round-1-result'),ra=document.getElementById('round-2-intro'),sa=document.getElementById('team-grid'),ta=document.getElementById('r3-team-title'),ua=document.getElementById('r3-story-display'),va=document.getElementById('astra-bank'),wa=document.querySelectorAll('.sequence-slot'),xa=document.getElementById('round-3-message'),ya=document.getElementById('final-outcome-text'),za=document.getElementById('failure-message');let Aa,Ba=null,Ca=!1,Da=null,Ea=null;function Fa(t){fa.forEach(e=>e.classList.add('hidden')),document.getElementById(t).classList.remove('hidden'),localStorage.setItem('currentScreen',t)}function Ga(){let t=0;const n=(aa*ba)-da.length;oa.querySelectorAll('.jigsaw-slot').forEach(e=>{e.firstChild&&e.firstChild.id===e.dataset.correctId&&t++}),t===aa*ba?(Ca||(Ca=!0,clearInterval(Aa),Ha("You got it right! You have received Astra 1."),setTimeout(()=>Ja(),2500))):pa.innerText=`Fragments Aligned: ${t-da.length}/${n}`}function Ha(t){pa.innerText=t,pa.style.color=Ca?'var(--color-primary)':'#ff4444',document.querySelectorAll('.jigsaw-piece').forEach(t=>{t.classList.contains('pre-solved')||(t.draggable=!1,t.classList.add('locked'))}),ia.classList.remove('hidden')}function Ia(){oa.innerHTML='',na.innerHTML='',Ca=!1,pa.innerText="";const t=oa.offsetWidth;if(0===t)return;const n=t/ba,i=(aa*ba);let r=[];const s=[];for(let e=0;e<i;e++){const t=document.createElement('div');t.classList.add('jigsaw-slot'),t.dataset.correctId=`piece-${e}`,oa.appendChild(t),Ka(t),s.push(t)}for(let a=0;a<i;a++){const i=document.createElement('div');i.classList.add('jigsaw-piece'),i.id=`piece-${a}`,i.style.width=`${n}px`,i.style.height=`${n}px`;const l=Math.floor(a/ba),o=a%ba,d=-o*n,f=-l*n;i.style.backgroundImage="url('puzzle-image.jpg')",i.style.backgroundPosition=`${d}px ${f}px`,i.style.backgroundSize=`${t}px ${t}px`,da.includes(a)?(s[a].appendChild(i),i.classList.add('pre-solved','locked'),i.draggable=!1):(i.draggable=!0,i.addEventListener('dragstart',e=>{Ba=e.target,setTimeout(()=>e.target.style.opacity='0.5',0)}),i.addEventListener('dragend',e=>e.target.style.opacity='1'),r.push(i))}r.sort(()=>Math.random()-.5),r.forEach(e=>na.appendChild(e)),La(),Ga(),Ma()}function Ka(e){e.addEventListener('dragover',e=>{e.preventDefault(),e.target.hasChildNodes()||e.target.classList.add('drag-over')}),e.addEventListener('dragleave',e=>e.target.classList.remove('drag-over')),e.addEventListener('drop',t=>{t.preventDefault(),e.classList.remove('drag-over'),!e.hasChildNodes()&&Ba&&(e.appendChild(Ba),Ga())})}function La(){na.addEventListener('dragover',e=>{e.preventDefault(),na.classList.add('drag-over')}),na.addEventListener('dragleave',e=>na.classList.remove('drag-over')),na.addEventListener('drop',e=>{e.preventDefault(),na.classList.remove('drag-over'),Ba&&(na.appendChild(Ba),Ga())})}function Ma(){let t=_*60;clearInterval(Aa);const e=()=>{0>=t?(clearInterval(Aa),Ca||(Ha("TIME EXPIRED! The glyph remains incomplete..."),Ja())):(t--,(()=>{const e=Math.floor(t/60).toString().padStart(2,'0'),n=(t%60).toString().padStart(2,'0');ma.innerText=`${e}:${n}`})())};e(),Aa=setInterval(e,1000)}function Ja(){Fa('round-2-transition-screen'),Ca?(qa.innerText="ASTRA 1 ACQUIRED!",qa.style.color='var(--color-primary)',ra.innerText="Your intellect shines, warrior! The first seal is broken, and Astra 1 is yours!"):(qa.innerText="GLYPH REMAINS UNSEALED!",qa.style.color='#ff4444',ra.innerText="Time has run its course, warrior. While the first Astra eludes your complete grasp, your journey must continue!")}function Na(){sa.innerHTML='';for(let t=1;t<=f.length;t++){const e=document.createElement('button');e.classList.add('team-button'),e.innerText=`TEAM ${t}`,e.dataset.teamId=t,e.addEventListener('click',Oa),sa.appendChild(e)}}function Oa(t){const e=t.target.dataset.teamId;Da=f.find(t=>t.team==e);const n=prompt(`The Oracle demands the secret key for Team ${e}:`);n&&(n.trim().toUpperCase()===Da.secretKey.toUpperCase()?(ta.innerText=`TEAM ${e}'S CHALLENGE`,ua.innerText=f[e-1].asuraForm,Fa('round-3-story-screen'),Pa(Da)):alert("Incorrect key. The path remains sealed."))}function Pa(t){xa.innerText="Arrange the Astras in the correct sequence to pierce his defenses!",xa.style.color='var(--color-text-light)',va.innerHTML='<h3>AVAILABLE ASTRAS</h3>';const e=[...ca].sort(()=>Math.random()-.5);e.forEach(e=>{const t=document.createElement('div');t.classList.add('astra-item'),t.innerText=e,t.draggable=!0,t.addEventListener('dragstart',e=>{Ea=e.target}),va.appendChild(t)}),wa.forEach(e=>{e.innerHTML='',Qa(e)}),za.classList.add('hidden'),Qa(va)}function Qa(t){t.addEventListener('dragover',e=>{e.preventDefault(),t.classList.add('drag-over')}),t.addEventListener('dragleave',e=>t.classList.remove('drag-over')),t.addEventListener('drop',e=>{e.preventDefault(),t.classList.remove('drag-over'),Ea&&(t.hasChildNodes()&&t.firstChild.classList?.contains('astra-item')&&(Ea.parentElement.appendChild(t.firstChild)),t.appendChild(Ea))})}function Ra(){const t=Array.from(wa).map(e=>{const t=e.firstChild?.innerText||null;return t?t.trim().toLowerCase():null});if(t.some(e=>null===e)){xa.innerText="All layers must be filled, warrior!",xa.style.color='#ff4444';return}const e=Da.correctSequence.map(e=>e.trim().toLowerCase()),n=t.length===e.length&&t.every((t,n)=>t===e[n]);n?Fa('victory-screen'):(ya.innerText="SEQUENCE INCORRECT!",za.classList.remove('hidden'),Fa('final-screen'))}ga.addEventListener('click',()=>Fa('story-screen')),ha.addEventListener('click',()=>{Fa('round-1-screen'),Ia()}),ia.addEventListener('click',()=>{Fa('round-3-selection-screen'),Na()}),ja.addEventListener('click',Ra),ka.addEventListener('click',()=>Fa('round-3-puzzle-screen')),la.addEventListener('click',()=>Fa('round-3-story-screen')),(e=>{const t=localStorage.getItem('currentScreen');t&&("round-2-transition-screen"===t||"round-3-selection-screen"===t||"round-3-story-screen"===t||"final-screen"===t||"victory-screen"===t)?(Fa(t),"round-2-transition-screen"===t&&(ia.classList.remove('hidden'),qa.innerText="Round 1 Status",ra.innerText="Continue your journey from here."),"round-3-selection-screen"===t&&Na()):(Fa('welcome-screen'),localStorage.setItem('currentScreen','welcome-screen'))})()});
